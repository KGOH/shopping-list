<h2>New Schedule</h2>
<form [formGroup]="form" (submit)="onSubmit()">
  <p>
    <mat-form-field>
      <input type="text"
             placeholder="Медикамент"
             aria-label="Number"
             matInput
             formControlName="drug"
             required
             [matAutocomplete]="auto">
      <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete" [displayWith]="drugName">
        <mat-option *ngFor="let drug of filteredDrugs | async" [value]="drug">
          {{drug.name}}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
    <mat-form-field>
      <input type="text"
             placeholder="Упаковка"
             aria-label="Number"
             matInput
             formControlName="drug"
             required
             [matAutocomplete]="drugPackageAutocomplete">
      <mat-autocomplete autoActiveFirstOption #drugPackageAutocomplete="matAutocomplete" [displayWith]="drugPackageName">
        <mat-option *ngFor="let drugPackage of filteredDrugPackages | async" [value]="drugPackage">
          {{drugPackage.name}}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
  </p>
  <p>
    <mat-form-field>
      <input type="text"
             class="schedule-input"
             placeholder="Расписание"
             aria-label="Number"
             (change)="checkAutoAddScheduleEvent()"
             (keydown.escape)="checkCancel(scheduleAutocomplete.isOpen)"
             #scheduleInput
             matInput
             [formControl]="scheduleControl"
             [matAutocomplete]="scheduleAutocomplete">
      <mat-autocomplete autoActiveFirstOption #scheduleAutocomplete="matAutocomplete" panelWidth="200" (optionSelected)="onScheduleSelected()">
        <mat-option *ngFor="let schedule of filteredSchedules | async" [value]="schedule[1]">
          {{schedule[0]}}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
  </p>
  <p class="buttons">
    <input type="submit" value="Добавить">
  </p>
</form>
